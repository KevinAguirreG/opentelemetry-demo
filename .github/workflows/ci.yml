name: CI Build and Test
on:
push:
branches: [ main, develop ]
pull_request:
branches: [ main, develop ]
jobs:
lint:
name: Lint
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v4
- name: Run hadolint
uses: hadolint/hadolint-action@v3.1.0
with:
recursive: true
test-frontend:
name: Frontend Tests
runs-on: ubuntu-latest
needs: lint
defaults:
run:
working-directory: src/frontend
steps:
- uses: actions/checkout@v4
- uses: actions/setup-node@v4
with:
node-version: '20'
- run: npm ci
- run: npm test -- --watchAll=false --passWithNoTests
test-go:
name: Go Tests
runs-on: ubuntu-latest
needs: lint
defaults:
run:
working-directory: src/productcatalogservice
steps:
- uses: actions/checkout@v4
- uses: actions/setup-go@v5
with:
go-version: '1.22'
- run: go test -v -race ./...
test-python:
name: Python Tests
runs-on: ubuntu-latest
needs: lint
defaults:
run:
working-directory: src/recommendationservice
steps:
- uses: actions/checkout@v4
- uses: actions/setup-python@v5
with:
python-version: '3.12'
- run: pip install -r requirements.txt pytest
- run: pytest tests/ -v --tb=short || echo 'no tests'
